(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a(190)},190:function(e,t,a){"use strict";a.r(t);var n=a(65),l=a.n(n),r=a(0),c=a.n(r),o=(a(179),a(36)),u=a(12),i=a(17),m=a(189),s=a(206),E=a(207),d=a(99);d.a.initializeApp({apiKey:"AIzaSyBgdY72fdbRkaQ2gBeBGWX_wYNyPIurR_4",authDomain:"document-f8779.firebaseapp.com",projectId:"document-f8779",storageBucket:"document-f8779.appspot.com",messagingSenderId:"1097137111493",appId:"1:1097137111493:web:faebb77a232ac42b784bac"});var h=d.a;var p=function(){var e=c.a.useState(null),t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.useEffect(function(){h.auth().onAuthStateChanged(function(e){n(e)})},[]),c.a.createElement(m.a,{style:{backgroundColor:"black",color:"white"}},c.a.createElement(m.a.Item,{as:o.b,to:"/",style:{color:"white"}},"Document"),c.a.createElement(m.a.Item,null,c.a.createElement(s.a,null)),c.a.createElement(m.a.Item,{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",color:"white"}},c.a.createElement("h2",null," TSMC Document")),c.a.createElement(m.a.Menu,{position:"right"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a.Item,{as:o.b,to:"/newPost",style:{color:"white"}},"\u767c\u8868\u6587\u7ae0")," ",c.a.createElement(m.a.Item,{as:o.b,to:"/home",style:{color:"white"}},"Main page")," ",c.a.createElement(m.a.Item,{as:o.b,to:"/view",style:{color:"white"}},"View"),c.a.createElement(E.a,{item:!0,text:a&&a.displayName?a.displayName:"\u9084\u6c92\u6709\u540d\u5b57",style:{color:"white"}},c.a.createElement(E.a.Menu,null,c.a.createElement(E.a.Item,{onClick:function(){return h.auth().signOut()},style:{color:"white"}},"Logout"),c.a.createElement(E.a.Item,{as:o.b,to:"/home"},"Main page"),c.a.createElement(E.a.Item,null,"\u60f3\u5230\u5728\u52a0")))):c.a.createElement(m.a.Item,{as:o.b,to:"/signin",style:{color:"white"}},"Sign in")))},f=a(205),g=a(208),b=a(211);a(187);var v=function(){var e=Object(u.n)(),t=c.a.useState("Signin"),a=Object(i.a)(t,2),n=a[0],l=a[1],r=c.a.useState(""),o=Object(i.a)(r,2),s=o[0],E=o[1],d=c.a.useState(""),p=Object(i.a)(d,2),v=p[0],w=p[1],y=c.a.useState(""),I=Object(i.a)(y,2),j=I[0],O=I[1],S=c.a.useState(!1),C=Object(i.a)(S,2),U=C[0],k=C[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null,c.a.createElement(m.a,{widths:2},c.a.createElement(m.a.Item,{active:"Signin"===n,onClick:function(){O(""),l("Signin")}},"Sign in"),c.a.createElement(m.a.Item,{active:"Register"===n,onClick:function(){O(""),l("Register")}},"Register")),c.a.createElement(g.a,{onSubmit:function(){k(!0),"Register"===n?h.auth().createUserWithEmailAndPassword(s,v).then(function(){e("/"),k(!1)}).catch(function(e){switch(e.code){case"auth/email-already-in-use":O("Email already in use");break;case"auth/invalid-email":O("Invalid email");break;case"auth/week-password":O("Week password")}k(!1)}):"Signin"===n&&h.auth().signInWithEmailAndPassword(s,v).then(function(){e("/"),k(!1)}).catch(function(e){switch(e.code){case"auth/invalid-email":O("invalid email");break;case"auth/user-not-found":O("User not found");break;case"auth/wrong-password":O("wrong password")}k(!1)})}},c.a.createElement(g.a.Input,{label:"Email",value:s,onChange:function(e){return E(e.target.value)},placeholder:"Username",type:"email"}),c.a.createElement(g.a.Input,{label:"Password",value:v,placeholder:"Password",onChange:function(e){return w(e.target.value)},type:"password"}),j&&c.a.createElement(b.a,{negative:!0},j),c.a.createElement(g.a.Button,{loading:U},"Signin"===n?"Sign in":"Register"))))},w=a(87),y=a(194),I=a(209),j=a(191),O=a(119),S=(a(143),a(210));var C=function(){var e=c.a.useState([]),t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.useEffect(function(){h.firestore().collection("topics").get().then(function(e){var t=e.docs.map(function(e){return e.data()});n(t)})},[]),c.a.createElement(S.a,{animated:!0,selection:!0},a.map(function(e){return c.a.createElement(S.a.Item,{key:e.name},e.name)}))};var U=function(){var e=c.a.useState([]),t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.useEffect(function(){h.firestore().collection("posts").get().then(function(e){var t=e.docs.map(function(e){var t=e.id;return Object(w.a)({},e.data(),{id:t})});n(t)})},[]),c.a.createElement(f.a,null,c.a.createElement(y.a,null,c.a.createElement(y.a.Row,null,c.a.createElement(y.a.Column,{width:3},c.a.createElement(C,null)),c.a.createElement(y.a.Column,{width:9},c.a.createElement(I.a.Group,null,a.map(function(e){return c.a.createElement(I.a,{key:e.id,as:o.b,to:"/post/".concat(e.id),onClick:function(){return t=e.id,void h.firestore().collection("posts").doc(t).update({viewCount:h.firestore.FieldValue.increment(1)});var t}},c.a.createElement(j.a,{src:e.imageUrl,size:"tiny"}),c.a.createElement(I.a.Content,null,c.a.createElement(I.a.Meta,null,e.author.photoURL?c.a.createElement(j.a,{src:e.author.photoURL,width:25}):c.a.createElement(O.a,{name:"user circle",size:"small"}),e.topic," \u2022 ",e.author.name||"\u533f\u540d"," \u2022"," ",e.createAt||"2021-10-10"),c.a.createElement(I.a.Header,null,e.title),c.a.createElement(I.a.Description,null,e.content),c.a.createElement(I.a.Extra,null,"\u4fee\u6539\u6b21\u6578 : ",e.updateCount||0,"\u2022"," ","\u89c0\u770b\u6b21\u6578 : ",e.viewCount||0)))}))))))},k=a(214),R=a(212);a(192);var A=function(){var e=Object(u.n)(),t=Object(r.useState)(""),a=Object(i.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)(""),m=Object(i.a)(o,2),s=m[0],E=m[1],d=Object(r.useState)([]),p=Object(i.a)(d,2),b=p[0],v=p[1],w=Object(r.useState)(""),y=Object(i.a)(w,2),I=y[0],j=y[1],O=Object(r.useState)(null),S=Object(i.a)(O,2),C=S[0],U=S[1],A=Object(r.useState)(!1),P=Object(i.a)(A,2),V=P[0],L=P[1];c.a.useEffect(function(){h.firestore().collection("topics").get().then(function(e){var t=e.docs.map(function(e){return e.data()});v(t)})},[]);var D=b.map(function(e){return{text:e.name,value:e.name}});return C&&URL.createObjectURL(C),c.a.createElement(f.a,null,c.a.createElement(k.a,{as:"h1"},"New Post"),c.a.createElement(g.a,{onSubmit:function(){L(!0);var t=h.firestore().collection("posts").doc(),a=h.storage().ref("post/"+t.id),l={};null!==C&&(l={contentType:C.type}),a.put(C,l).then(function(){a.getDownloadURL().then(function(a){t.set({topic:I,content:s,title:n,cretedAt:h.firestore.Timestamp.now(),author:{display:h.auth().currentUser.displayName||"Unknown",photoURL:h.auth().currentUser.photoURL||"https://react.semantic-ui.com/images/avatar/large/molly.png",uid:h.auth().currentUser.uid,email:h.auth().currentUser.email},imageUrl:a}).then(function(){L(!1),e("/")})})})}},c.a.createElement(g.a.Input,{type:"file",width:6,id:"post-image",style:{display:"None"},onChange:function(e){U(e.target.files[0]),console.log(e.target.files[0])}}),c.a.createElement(g.a.Input,{placeholder:"\u6587\u7ae0\u6a19\u984c",value:n,onChange:function(e){return l(e.target.value)}}),c.a.createElement(g.a.TextArea,{placeholder:"\u6587\u7ae0\u5167\u5bb9",value:s,onChange:function(e){return E(e.target.value)},rows:30}),c.a.createElement(g.a.Dropdown,{placeholder:"\u6587\u7ae0\u5206\u985e",options:D,value:I,onChange:function(e,t){var a=t.value;return j(a)},selection:!0}),c.a.createElement("div",null,c.a.createElement(R.a,{loading:V},"\u4e0a\u50b3\u6a94\u6848"),c.a.createElement(R.a,{as:"label",htmlFor:"post-image"},"\u4e0a\u50b3\u6a94\u6848"))))},P=a(215),V=a(193);a(156);var L=function(){var e=Object(u.p)().postId,t=c.a.useState({author:{}}),a=Object(i.a)(t,2),n=a[0],l=a[1];c.a.useEffect(function(){h.firestore().collection("posts").doc(e).get().then(function(e){var t=e.data();l({title:t.title,content:t.content,imageUrl:t.imageUrl,author:t.author,viewCount:t.viewCount||0,updateCount:t.updateCount||0,createAt:t.createAt||new Date})})},[e]);var r=[{menuItem:"Version1",render:function(){return c.a.createElement(P.a.Pane,null,"Version1")}},{menuItem:"Version2",render:function(){return c.a.createElement(P.a.Pane,null,"Version2")}},{menuItem:"Version3",render:function(){return c.a.createElement(P.a.Pane,null,"Version3")}},{menuItem:"Version4",render:function(){return c.a.createElement(P.a.Pane,null,"Version4")}},{menuItem:"Version5",render:function(){return c.a.createElement(P.a.Pane,null,"Version5")}}];return c.a.createElement(f.a,null,c.a.createElement(y.a,null,c.a.createElement(y.a.Row,null,c.a.createElement(y.a.Column,{width:3},c.a.createElement(C,null)),c.a.createElement(y.a.Column,{width:13},c.a.createElement(P.a,{panes:r}),c.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"}},c.a.createElement(j.a,{src:n.author.photoURL,size:"tiny",style:{marginRight:"1rem"}}),c.a.createElement("div",null,c.a.createElement("h5",null,"\u4e0a\u7248\u672c\u4fee\u6539\u4eba\u54e1 :"),n.author.displayName||"\u533f\u540d")),c.a.createElement(V.a,{basic:!0,vertical:!0},"\u89c0\u770b\u6b21\u6578: ",n.viewCount||0,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \u66f4\u6539\u6b21\u6578:"," ",n.updateCount||0),c.a.createElement(k.a,{as:"h1"},n.title,c.a.createElement(k.a.Subheader,null,n.created_At?n.createAt.toDate().toLocaleDateString():"")),c.a.createElement(j.a,{src:n.imageUrl,size:"large"}),c.a.createElement(V.a,{basic:!0,vertical:!0},n.content),c.a.createElement(R.a,{basic:!0,as:o.b,to:"modify"},"\u66f4\u6539\u6587\u7ae0")))))};var D=function(){return c.a.createElement(y.a,{celled:"internally"},c.a.createElement(y.a.Row,null,c.a.createElement(y.a.Column,{width:2},c.a.createElement(j.a,{src:"https://react.semantic-ui.com/images/wireframe/image.png",size:"large"}),c.a.createElement(R.a,{basic:!0},"\u4e0a\u50b3\u982d\u8cbc"),c.a.createElement(V.a,null,c.a.createElement("h1",null,"\u982d\u8cbc\u653e\u4e0a\u9762\u4e0b\u9762\u52a0\u4f7f\u7528\u8005\u8cc7\u8a0a"),c.a.createElement("h1",null,"1"),c.a.createElement("h1",null,"2"),c.a.createElement("h1",null,"3"),c.a.createElement("h1",null,"4"),c.a.createElement("h1",null,"5"),c.a.createElement("h1",null,"6"),c.a.createElement("h1",null,"7"),c.a.createElement("h1",null,"8"))),c.a.createElement(y.a.Column,{width:13},c.a.createElement("h1",null,"\u9084\u6c92\u60f3\u5230"))))};var x=function(){var e=Object(u.p)().postId,t=Object(r.useState)(""),a=Object(i.a)(t,2),n=(a[0],a[1]),l=Object(r.useState)(""),o=Object(i.a)(l,2),m=(o[0],o[1],c.a.useState({author:{}})),s=Object(i.a)(m,2),E=s[0],d=s[1];return c.a.useEffect(function(){h.firestore().collection("posts").doc(e).get().then(function(e){var t=e.data();d(t)})},[e]),c.a.createElement(f.a,null,c.a.createElement(k.a,{as:"h1"},"\u66f4\u6539\u6587\u7ae0"),c.a.createElement(g.a,null,c.a.createElement(g.a.Input,{value:E.title,readOnly:!0}),c.a.createElement(g.a.TextArea,{value:E.content,onChange:function(e){return n(e.target.value)},rows:30}),c.a.createElement(R.a,null,"\u9001\u51fa\u66f4\u6539")))};var z=function(){return c.a.createElement(f.a,null,c.a.createElement("h1",null,"View 12345678987542132156"),c.a.createElement("h1",null,"\u9084\u6c92\u60f3\u5230\u8981\u653e\u751a\u9ebc"))};var B=function(){return c.a.createElement(o.a,null,c.a.createElement(p,null),c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",element:c.a.createElement(U,null)}),c.a.createElement(u.a,{path:"/signin",element:c.a.createElement(v,null)}),c.a.createElement(u.a,{path:"/newPost",element:c.a.createElement(A,null)}),c.a.createElement(u.a,{path:"post/:postId",element:c.a.createElement(L,null)}),c.a.createElement(u.a,{path:"/home",element:c.a.createElement(D,null)}),c.a.createElement(u.a,{path:"/post/:postId/modify",element:c.a.createElement(x,null)}),c.a.createElement(u.a,{path:"/view",element:c.a.createElement(z,null)})))};l.a.render(c.a.createElement(B,null),document.getElementById("root"))}},[[172,2,1]]]);
//# sourceMappingURL=main.4bd38a51.chunk.js.map